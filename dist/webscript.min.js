!function e(t,n,r){function i(a,c){if(!n[a]){if(!t[a]){var s="function"==typeof require&&require;if(!c&&s)return s(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return i(n||e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";function r(e,t,n){if(e.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==t)for(var i=0;i<t.length;++i){var o=t[i].data;void 0!==o&&r(o,t[i].children,t[i].sel)}}function i(e,t,n){var i,c,s,u={};if(void 0!==n?(u=t,a.array(n)?i=n:a.primitive(n)?c=n:n&&n.sel&&(i=[n])):void 0!==t&&(a.array(t)?i=t:a.primitive(t)?c=t:t&&t.sel?i=[t]:u=t),a.array(i))for(s=0;s<i.length;++s)a.primitive(i[s])&&(i[s]=o.vnode(void 0,void 0,void 0,i[s]));return"s"!==e[0]||"v"!==e[1]||"g"!==e[2]||3!==e.length&&"."!==e[3]&&"#"!==e[3]||r(u,i,e),o.vnode(e,u,i,c,void 0)}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./vnode"),a=e("./is");n.h=i,n.default=i},{"./is":3,"./vnode":9}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.htmlDomApi={createElement:function(e){return document.createElement(e)},createElementNS:function(e,t){return document.createElementNS(e,t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},getTextContent:function(e){return e.textContent},isElement:function(e){return 1===e.nodeType},isText:function(e){return 3===e.nodeType},isComment:function(e){return 8===e.nodeType}},n.default=n.htmlDomApi},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.array=Array.isArray,n.primitive=function(e){return"string"==typeof e||"number"==typeof e}},{}],4:[function(e,t,n){"use strict";function r(e,t){var n,r=t.elm,i=e.data.attrs,l=t.data.attrs;if((i||l)&&i!==l){i=i||{},l=l||{};for(n in l){var d=l[n];i[n]!==d&&(u[n]?d?r.setAttribute(n,""):r.removeAttribute(n):n.charCodeAt(0)!==s?r.setAttribute(n,d):n.charCodeAt(3)===c?r.setAttributeNS(a,n,d):n.charCodeAt(5)===c?r.setAttributeNS(o,n,d):r.setAttribute(n,d))}for(n in i)n in l||r.removeAttribute(n)}}Object.defineProperty(n,"__esModule",{value:!0});for(var i=["allowfullscreen","async","autofocus","autoplay","checked","compact","controls","declare","default","defaultchecked","defaultmuted","defaultselected","defer","disabled","draggable","enabled","formnovalidate","hidden","indeterminate","inert","ismap","itemscope","loop","multiple","muted","nohref","noresize","noshade","novalidate","nowrap","open","pauseonexit","readonly","required","reversed","scoped","seamless","selected","sortable","spellcheck","translate","truespeed","typemustmatch","visible"],o="http://www.w3.org/1999/xlink",a="http://www.w3.org/XML/1998/namespace",c=58,s=120,u=Object.create(null),l=0,d=i.length;l<d;l++)u[i[l]]=!0;n.attributesModule={create:r,update:r},n.default=n.attributesModule},{}],5:[function(e,t,n){"use strict";function r(e,t,n){if("function"==typeof e)e.call(t,n,t);else if("object"==typeof e)if("function"==typeof e[0])if(2===e.length)e[0].call(t,e[1],n,t);else{var i=e.slice(1);i.push(n),i.push(t),e[0].apply(t,i)}else for(var o=0;o<e.length;o++)r(e[o])}function i(e,t){var n=e.type,i=t.data.on;i&&i[n]&&r(i[n],t,e)}function o(){return function e(t){i(t,e.vnode)}}function a(e,t){var n,r=e.data.on,i=e.listener,a=e.elm,c=t&&t.data.on,s=t&&t.elm;if(r!==c){if(r&&i)if(c)for(n in r)c[n]||a.removeEventListener(n,i,!1);else for(n in r)a.removeEventListener(n,i,!1);if(c){var u=t.listener=e.listener||o();if(u.vnode=t,r)for(n in c)r[n]||s.addEventListener(n,u,!1);else for(n in c)s.addEventListener(n,u,!1)}}}Object.defineProperty(n,"__esModule",{value:!0}),n.eventListenersModule={create:a,update:a,destroy:a},n.default=n.eventListenersModule},{}],6:[function(e,t,n){"use strict";function r(e,t){var n,r,i=t.elm,o=e.data.props,a=t.data.props;if((o||a)&&o!==a){o=o||{},a=a||{};for(n in o)a[n]||delete i[n];for(n in a)r=a[n],o[n]===r||"value"===n&&i[n]===r||(i[n]=r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.propsModule={create:r,update:r},n.default=n.propsModule},{}],7:[function(e,t,n){"use strict";function r(e){return void 0===e}function i(e){return void 0!==e}function o(e,t){return e.key===t.key&&e.sel===t.sel}function a(e){return void 0!==e.sel}function c(e,t,n){var r,i,o,a={};for(r=t;r<=n;++r)null!=(o=e[r])&&void 0!==(i=o.key)&&(a[i]=r);return a}Object.defineProperty(n,"__esModule",{value:!0});var s=e("./vnode"),u=e("./is"),l=e("./htmldomapi"),d=s.default("",{},[],void 0,void 0),f=["create","update","remove","destroy","pre","post"],v=e("./h");n.h=v.h;var h=e("./thunk");n.thunk=h.thunk,n.init=function(e,t){function n(e){var t=e.id?"#"+e.id:"",n=e.className?"."+e.className.split(" ").join("."):"";return s.default(L.tagName(e).toLowerCase()+t+n,{},[],void 0,e)}function v(e,t){return function(){if(0==--t){var n=L.parentNode(e);L.removeChild(n,e)}}}function h(e,t){var n,o=e.data;void 0!==o&&i(n=o.hook)&&i(n=n.init)&&(n(e),o=e.data);var a=e.children,c=e.sel;if("!"===c)r(e.text)&&(e.text=""),e.elm=L.createComment(e.text);else if(void 0!==c){var s=c.indexOf("#"),l=c.indexOf(".",s),f=s>0?s:c.length,v=l>0?l:c.length,p=-1!==s||-1!==l?c.slice(0,Math.min(f,v)):c,m=e.elm=i(o)&&i(n=o.ns)?L.createElementNS(n,p):L.createElement(p);for(f<v&&m.setAttribute("id",c.slice(f+1,v)),l>0&&m.setAttribute("class",c.slice(v+1).replace(/\./g," ")),n=0;n<k.create.length;++n)k.create[n](d,e);if(u.array(a))for(n=0;n<a.length;++n){var b=a[n];null!=b&&L.appendChild(m,h(b,t))}else u.primitive(e.text)&&L.appendChild(m,L.createTextNode(e.text));i(n=e.data.hook)&&(n.create&&n.create(d,e),n.insert&&t.push(e))}else e.elm=L.createTextNode(e.text);return e.elm}function p(e,t,n,r,i,o){for(;r<=i;++r){var a=n[r];null!=a&&L.insertBefore(e,h(a,o),t)}}function m(e){var t,n,r=e.data;if(void 0!==r){for(i(t=r.hook)&&i(t=t.destroy)&&t(e),t=0;t<k.destroy.length;++t)k.destroy[t](e);if(void 0!==e.children)for(n=0;n<e.children.length;++n)null!=(t=e.children[n])&&"string"!=typeof t&&m(t)}}function b(e,t,n,r){for(;n<=r;++n){var o=void 0,a=void 0,c=void 0,s=t[n];if(null!=s)if(i(s.sel)){for(m(s),a=k.remove.length+1,c=v(s.elm,a),o=0;o<k.remove.length;++o)k.remove[o](s,c);i(o=s.data)&&i(o=o.hook)&&i(o=o.remove)?o(s,c):c()}else L.removeChild(e,s.elm)}}function g(e,t,n,i){for(var a,s,u,l=0,d=0,f=t.length-1,v=t[0],m=t[f],g=n.length-1,x=n[0],A=n[g];l<=f&&d<=g;)null==v?v=t[++l]:null==m?m=t[--f]:null==x?x=n[++d]:null==A?A=n[--g]:o(v,x)?(y(v,x,i),v=t[++l],x=n[++d]):o(m,A)?(y(m,A,i),m=t[--f],A=n[--g]):o(v,A)?(y(v,A,i),L.insertBefore(e,v.elm,L.nextSibling(m.elm)),v=t[++l],A=n[--g]):o(m,x)?(y(m,x,i),L.insertBefore(e,m.elm,v.elm),m=t[--f],x=n[++d]):(void 0===a&&(a=c(t,l,f)),r(s=a[x.key])?(L.insertBefore(e,h(x,i),v.elm),x=n[++d]):((u=t[s]).sel!==x.sel?L.insertBefore(e,h(x,i),v.elm):(y(u,x,i),t[s]=void 0,L.insertBefore(e,u.elm,v.elm)),x=n[++d]));l>f?p(e,null==n[g+1]?null:n[g+1].elm,n,d,g,i):d>g&&b(e,t,l,f)}function y(e,t,n){var o,a;i(o=t.data)&&i(a=o.hook)&&i(o=a.prepatch)&&o(e,t);var c=t.elm=e.elm,s=e.children,u=t.children;if(e!==t){if(void 0!==t.data){for(o=0;o<k.update.length;++o)k.update[o](e,t);i(o=t.data.hook)&&i(o=o.update)&&o(e,t)}r(t.text)?i(s)&&i(u)?s!==u&&g(c,s,u,n):i(u)?(i(e.text)&&L.setTextContent(c,""),p(c,null,u,0,u.length-1,n)):i(s)?b(c,s,0,s.length-1):i(e.text)&&L.setTextContent(c,""):e.text!==t.text&&L.setTextContent(c,t.text),i(a)&&i(o=a.postpatch)&&o(e,t)}}var x,A,k={},L=void 0!==t?t:l.default;for(x=0;x<f.length;++x)for(k[f[x]]=[],A=0;A<e.length;++A){var C=e[A][f[x]];void 0!==C&&k[f[x]].push(C)}return function(e,t){var r,i,c,s=[];for(r=0;r<k.pre.length;++r)k.pre[r]();for(a(e)||(e=n(e)),o(e,t)?y(e,t,s):(i=e.elm,c=L.parentNode(i),h(t,s),null!==c&&(L.insertBefore(c,t.elm,L.nextSibling(i)),b(c,[e],0,0))),r=0;r<s.length;++r)s[r].data.hook.insert(s[r]);for(r=0;r<k.post.length;++r)k.post[r]();return t}}},{"./h":1,"./htmldomapi":2,"./is":3,"./thunk":8,"./vnode":9}],8:[function(e,t,n){"use strict";function r(e,t){t.elm=e.elm,e.data.fn=t.data.fn,e.data.args=t.data.args,t.data=e.data,t.children=e.children,t.text=e.text,t.elm=e.elm}function i(e){var t=e.data;r(t.fn.apply(void 0,t.args),e)}function o(e,t){var n,i=e.data,o=t.data,a=i.args,c=o.args;if(i.fn===o.fn&&a.length===c.length){for(n=0;n<c.length;++n)if(a[n]!==c[n])return void r(o.fn.apply(void 0,c),t);r(e,t)}else r(o.fn.apply(void 0,c),t)}Object.defineProperty(n,"__esModule",{value:!0});var a=e("./h");n.thunk=function(e,t,n,r){return void 0===r&&(r=n,n=t,t=void 0),a.h(e,{key:t,hook:{init:i,prepatch:o},fn:n,args:r})},n.default=n.thunk},{"./h":1}],9:[function(e,t,n){"use strict";function r(e,t,n,r,i){return{sel:e,data:t,children:n,text:r,elm:i,key:void 0===t?void 0:t.key}}Object.defineProperty(n,"__esModule",{value:!0}),n.vnode=r,n.default=r},{}],10:[function(e,t,n){function r(){var e=x.charAt(k);switch(A){case u:o==e&&"%"==x.charAt(k+1)?(A=l,i+="';",k++):"<"==e&&"s"==x.charAt(k+1)&&"c"==x.charAt(k+2)&&"r"==x.charAt(k+3)&&"i"==x.charAt(k+4)&&"p"==x.charAt(k+5)&&"t"==x.charAt(k+6)&&/[>\s]/.test(x.charAt(k+7))?(A=m,i+="<script",k+=6):"$"==e&&"{"==x.charAt(k+1)?(A=v,i+="'+(",k++):i+="\r"==e?"\\r":"\n"==e?"\\n":e;break;case l:a==e?(A=d,i+=e):c==e?(A=f,i+=e):"%"==e&&">"==x.charAt(k+1)?(A=u,i+=";html+='",k++):i+=e;break;case d:s==e?i+=e+x.charAt(++k):a==e?(A=l,i+=e):i+=e;break;case f:s==e?i+=e+x.charAt(++k):c==e?(A=l,i+=e):i+=e;break;case v:a==e?(A=h,i+=e):c==e?(A=p,i+=e):"}"==e?(A=u,i+=")+'"):i+=e;break;case h:case b:s==e?i+=e+x.charAt(++k):a==e?(A=v,i+=e):i+=e;break;case p:s==e?i+=e+x.charAt(++k):c==e?(A=v,i+=e):i+=e;break;case m:a==e?(A=b,i+=e):c==e?(A=g,i+=e):">"==e?(A=y,i+=e):i+=e;break;case y:"<"==e&&"/"==x.charAt(k+1)&&"s"==x.charAt(k+2)&&"c"==x.charAt(k+3)&&"r"==x.charAt(k+4)&&"i"==x.charAt(k+5)&&"p"==x.charAt(k+6)&&"t"==x.charAt(k+7)&&">"==x.charAt(k+8)?(A=u,i+="<\/script>",k+=8):i+=e;break;case b:s==e?i+=e+x.charAt(++k):a==e?(A=y,i+=e):i+=e;break;case g:s==e?i+=e+x.charAt(++k):c==e?(A=y,i+=e):i+=e}k++}var i,o="<",a="'",c='"',s="\\",u=0,l=1,d=2,f=3,v=4,h=5,p=6,m=7,b=8,g=9,y=11,x="",A=u,k=0;t.exports=function(e){i="var html='";for(var t=(x=e).length;k<t;)r();return i+="';return html;"}},{}],11:[function(require,module,exports){function __classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function documentHidden(){for(var e=["hidden","mozHidden","webkitHidden"],t=0,n=e.length;t<n;t++)if(e[t]in document)return document[e[t]];return!1}function addEventListener(e,t,n){t.trim().split(/\s+/).forEach(function(t){e.addEventListener(t,n)})}function removeEventListener(e,t,n){t.trim().split(/\s+/).forEach(function(t){e.removeEventListener(t,n)})}var snabbdom=require("snabbdom"),patch=snabbdom.init([require("snabbdom/modules/props").default,require("snabbdom/modules/attributes").default,require("snabbdom/modules/eventlisteners").default]),h=require("snabbdom/h").default,compiler=require("./compiler"),render=require("./render"),Observer=require("./observer"),parser=require("./parser");window.WebScript=function(data,options){function redraw(){console.log("redraw");var html=render(code,data),hyerscript=parser(html),vnodeTemp=eval(hyerscript);documentHidden()?(console.log("hidden"),visibilitychangeListener||addEventListener(document,"visibilitychange",function e(){console.log("visibilitychange"),removeEventListener(document,"visibilitychange",e),visibilitychangeListener(),visibilitychangeListener=null}),visibilitychangeListener=function(){repatch(vnodeTemp)}):repatch(vnodeTemp)}function repatch(e){timeId&&cancelAnimationFrame(timeId),timeId=requestAnimationFrame(function(){timeId=null,patch(vnode||element,e),vnode=e})}__classCallCheck(this,WebScript);var element;options=options||{},element="root"in options?options.root:document.body.children[0];var code=compiler(element.outerHTML.replace(/&lt;/gi,"<").replace(/&gt;/gi,">")),observer=new Observer(data),vnode;observer.attach(redraw),redraw();var timeId,visibilitychangeListener}},{"./compiler":10,"./observer":15,"./parser":16,"./render":17,snabbdom:7,"snabbdom/h":1,"snabbdom/modules/attributes":4,"snabbdom/modules/eventlisteners":5,"snabbdom/modules/props":6}],12:[function(e,t,n){t.exports=function(e){return"[object Array]"===toString.call(e)}},{}],13:[function(e,t,n){t.exports=function(e){return"[object Function]"===toString.call(e)}},{}],14:[function(e,t,n){t.exports=function(e){return"[object Object]"===toString.call(e)}},{}],15:[function(e,t,n){var r=e("./lib/isFunction"),i=e("./lib/isObject"),o=e("./lib/isArray");t.exports=function(e){function t(e){for(var t=0,r=n.length;t<r;t++)n[t](e)}var n=[];return function e(n,r){for(var a in n)!function(){var c=(r||"")+'["'+a+'"]',s=n[a];if(i(s)&&e(s,c),o(s))for(var u=["fill","push","pop","reverse","shift","splice","sort","unshift"],l=0,d=u.length;l<d;l++)!function(e,n){var r=e[n];Object.defineProperty(e,n,{value:function(){var e=r.apply(this,arguments);return t({target:c}),e}})}(s,u[l]);Object.defineProperty(n,a,{get:function(){return s},set:function(n){i(n)&&e(n,c),s=n,t({target:c})}})}()}(e),{attach:function(e){r(e)&&n.push(e)},detach:function(e){}}}},{"./lib/isArray":12,"./lib/isFunction":13,"./lib/isObject":14}],16:[function(e,t,n){function r(e){return d.parseFromString(e,"text/html").body.firstChild}function i(e){var t=e.tagName,n="h('"+t;e.id&&(n+="#"+e.id),e.className&&(n+="."+e.className.trim().replace(/\s+/,"."));for(var r=e.attributes,d={attrsList:[],propsList:[],onList:[]},f=0,v=r.length;f<v;f++){var h=r[f].name,p=r[f].value;if("name"!=h||!o(p)||"INPUT"!=t&&"TEXTAREA"!=t&&"SELECT"!=t)if(/^on/i.test(h)&&o(p)){m=a(p);d.onList.push(u(h.slice(2),m))}else"id"!=h&&"class"!=h&&d.attrsList.push(c(h)+":"+s(p));else{var m=a(p);"radio"==e.type?(d.propsList.push(u("checked",l(e.value)+"=="+m)),d.onList.push(u("change","function(event){"+m+"=event.target.value}"))):"checkbox"==e.type?(d.propsList.push(u("checked",m)),d.onList.push(u("change","function(event){"+m+"=event.target.checked}"))):(d.propsList.push(u("value",m)),d.onList.push(u("input","function(event){"+m+"=event.target.value}")))}}n+="',{";for(var h in d)d[h].length>0&&(n+=h.slice(0,-4)+":{"+d[h].join(",")+"},");n+="},[";for(var f=0,v=e.childNodes.length;f<v;f++){var b=e.childNodes[f];b.nodeType==Node.TEXT_NODE?n+=JSON.stringify(b.textContent)+",":n+=i(b)+","}return n+="])"}function o(e){return/^:[$[a-z]/i.test(e.trim())}function a(e){var t=/^:([^\s]+)/.exec(e.trim());return"data"+(/^\[/.test(t[1])?"":".")+t[1]}function c(e){return'"'+e+'"'}function s(e){return JSON.stringify(e)}function u(e,t){return e+":"+t}function l(e){return JSON.stringify(e)}var d=new DOMParser;t.exports=function(e){return i(r(e))}},{}],17:[function(require,module,exports){module.exports=function(code,data){var code="function("+Object.keys(data).join(",")+"){"+code+"}",fn;return eval("fn="+code),fn.apply(this,Object.values(data))}},{}]},{},[11]);